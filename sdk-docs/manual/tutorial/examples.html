<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">Tutorial</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
<link data-ice="userStyle" rel="stylesheet" href="user/css/0-main.css">
</head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/geospatial-services-framework" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="installation">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h2" data-link="manual/installation/installation.html"><a href="manual/installation/installation.html#installation-guide" data-ice="link">Installation Guide</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="tutorial">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#getting-started" data-ice="link">Getting Started</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#gsf-javascript-client-sdk" data-ice="link">GSF JavaScript Client SDK</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#about-the-sdk" data-ice="link">About the SDK</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#basic-usage" data-ice="link">Basic Usage</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#requirements" data-ice="link">Requirements</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#building-the-sdk" data-ice="link">Building the SDK</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#testing-the-sdk" data-ice="link">Testing the SDK</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#using-a-test-server" data-ice="link">Using a Test Server</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/getting-started.html"><a href="manual/tutorial/getting-started.html#building-the-documentation" data-ice="link">Building the Documentation</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html" data-ice="link">Examples</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#list-available-services" data-ice="link">List Available Services</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#list-available-tasks" data-ice="link">List Available Tasks</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#get-task-information" data-ice="link">Get Task Information</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#run-a-task" data-ice="link">Run a Task</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#using-promises" data-ice="link">Using Promises</a></li>
<li data-ice="manualNav" class="indent-h5" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#1-use-wait-" data-ice="link">1. Use .wait()</a></li>
<li data-ice="manualNav" class="indent-h5" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#2-use-submitandwait-" data-ice="link">2. Use .submitAndWait()</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#using-server-events" data-ice="link">Using Server Events</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#tracking-job-progress" data-ice="link">Tracking Job Progress</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#progress-callbacks" data-ice="link">Progress Callbacks</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#progress-events" data-ice="link">Progress Events</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#server-progress-events" data-ice="link">Server Progress Events</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#job-progress-events" data-ice="link">Job Progress Events</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/examples.html"><a href="manual/tutorial/examples.html#cancelling-jobs" data-ice="link">Cancelling Jobs</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-reference" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="identifiers.html"><a href="identifiers.html" data-ice="link">Reference</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#class" data-ice="link">Class</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#typedef" data-ice="link">Typedef</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="changelog">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-changelog" data-section-count="&#x25A0;" data-link="manual/changelog/CHANGELOG.html"><a href="manual/changelog/CHANGELOG.html" data-ice="link">Change Log</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/changelog/CHANGELOG.html"><a href="manual/changelog/CHANGELOG.html#1-0-0-2017-02-26" data-ice="link">1.0.0 / 2017-02-26</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/CHANGELOG.html"><a href="manual/changelog/CHANGELOG.html#new-features" data-ice="link">New Features</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Tutorial</span>
  </div>
  <div data-ice="content"><h1 id="examples">Examples</h1>
<p>Below are several examples of using the SDK.</p>
<h2 id="list-available-services">List Available Services</h2>
<p>The GSF <a href="./manual/../class/src/Server.js~Server.html"><strong>Server</strong></a> object provides the ability to list the available services on the server.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// GSF Server
const server = GSF.server({
    address: &apos;MyServer&apos;,
    port: &apos;9191&apos;
  });

// Get an array of available services.
server.services().then((services) =&gt; {
  services.forEach((service) =&gt; {
    // Print each service name.
    console.log(service.name);
  });
}).catch((err) =&gt; {
  // There was an error.
});</code>
</code></pre>
<h2 id="list-available-tasks">List Available Tasks</h2>
<p>The <a href="./manual/../class/src/Service.js~Service.html"><strong>Service</strong></a> object provides the ability to list the available tasks on the service.  The example below lists all tasks associated with the ENVI service.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// GSF Server
const server = GSF.server({
    address: &apos;MyServer&apos;,
    port: &apos;9191&apos;
  });

// Get the ENVI service.
const service = server.service(&apos;ENVI&apos;);

// Get an array of available tasks.
service.tasks().then((tasks) =&gt; {
  tasks.forEach((task) =&gt; {
    // Print each task name.
    console.log(task.name);
  });
}).catch((err) =&gt; {
  // There was an error.
});</code>
</code></pre>
<h2 id="get-task-information">Get Task Information</h2>
<p>The <a href="./manual/../class/src/Task.js~Task.html"><strong>Task</strong></a> object allows you to query the task and its parameters.  This may be useful when dynamically constructing UI elements representing task input parameters.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// GSF Server
const server = GSF.server({
    address: &apos;MyServer&apos;,
    port: &apos;9191&apos;
  });

// Get the ENVI service.
const service = server.service(&apos;ENVI&apos;);

// Get a task.
const task = service.task(&apos;SpectralIndex&apos;);

task.info().then((info) =&gt; {
  // Print the task info.
  console.log(info);
}).catch((err) =&gt; {
  // There was an error.
});</code>
</code></pre>
<h2 id="run-a-task">Run a Task</h2>
<p>There are many ways to run tasks and retrieve results using the GSF JavaScript SDK.  The following examples assume you have completed the steps below to create a task object.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// Get a task.  
const task = GSF.server({address:&apos;MyServer&apos;,port:&apos;9191&apos;}).service(&apos;ENVI&apos;).task(&apos;SpectralIndex&apos;);

const taskParameters = {
  parameters: {
    INPUT_RASTER: {
      FACTORY: &apos;URLRaster&apos;,
      URL: &apos;http://MyServer:9191/ese/data/qb_boulder_msi&apos;
    },
    INDEX: &apos;Normalized Difference Vegetation Index&apos;
  }
};</code>
</code></pre>
<h3 id="using-promises">Using Promises</h3>
<p>The SDK provides a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><strong>Promise</strong></a>-based interface for submitting tasks.  If the task succeeds, the promise will be fulfilled.  If the job fails, the job will be rejected.  There are two ways to use promises for job resolution.</p>
<h5 id="1-use-wait-">1. Use <a href="./manual/../class/src/Job.js~Job.html#instance-method-wait"><strong>.wait()</strong></a></h5>
<p>This function returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><strong>Promise</strong></a> to the job results.  The <a href="./manual/../class/src/Task.js~Task.html#instance-method-submit"><strong>.submit()</strong></a> function will return a Promise to a <a href="./manual/../class/src/Job.js~Job.html"><strong>Job</strong></a> object.  You may use this object to query for job information such as ID and status.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// Submit a job.
task.submit(taskParameters)
.then(job =&gt; job.wait()) // Waits for job to complete.
.then((results) =&gt; {
  // Do something with results.
  // This function is an example and is not provided by the SDK.
  AddToMap(results.OUTPUT_RASTER);
}).catch((jobErrorMessage) =&gt; {
  // Display error.
});</code>
</code></pre>
<h5 id="2-use-submitandwait-">2. Use <a href="./manual/../class/src/Task.js~Task.html#instance-method-submitAndWait"><strong>.submitAndWait()</strong></a></h5>
<p>This function simply combines the <a href="./manual/../class/src/Task.js~Task.html#instance-method-submit"><strong>.submit()</strong></a> and <a href="./manual/../class/src/Job.js~Job.html#instance-method-wait"><strong>.wait()</strong></a> functions.  This is perhaps the simplest way to submit a job and retrieve the results.  Use this if you are only intereseted in results and do not wish to interact with the <a href="./manual/../class/src/Job.js~Job.html"><strong>Job</strong></a> object.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// Submit a job.
task.submitAndWait(taskParameters).then((results) =&gt; {
    // Do something with results.
    // This function is an example and is not provided by the SDK.
    AddToMap(results.OUTPUT_RASTER);
  }).catch((jobErrorMessage) =&gt; {
    // Display error.
  });</code>
</code></pre>
<h3 id="using-server-events">Using Server Events</h3>
<p>The <a href="./manual/../class/src/Server.js~Server.html"><strong>Server</strong></a> and <a href="./manual/../class/src/Job.js~Job.html"><strong>Job</strong></a> objects emits all job events related to that server.  These classes inheret from Node&apos;s <a href="https://nodejs.org/api/events.html"><strong>EventEmitter</strong></a> and support methods such as .on(), .once(), .removeAllListeners(), etc.  The following example shows how to listen for job events.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// GSF Server
const server = GSF.server({
    address: &apos;MyServer&apos;,
    port: &apos;9191&apos;
  });

// Set up an event listeners.
server.once(&apos;JobSucceeded&apos;, (data) =&gt; {
  console.log(&apos;Job Succeeded: &apos;, data.jobId);
});  

server.once(&apos;JobFailed&apos;, (data) =&gt; {
  console.log(&apos;Job Failed: &apos;, data.jobId);
});

// Create a service object.
const service = server.service(&apos;ENVI&apos;);

// Create a task object.
const task = service.task(&apos;SpectralIndex&apos;);

const NDVIParameters = {
  parameters: {
    INPUT_RASTER: {
      FACTORY: &apos;URLRaster&apos;,
      URL: &apos;http://MyServer:9191/ese/data/qb_boulder_msi&apos;
    },
    INDEX: &apos;Normalized Difference Vegetation Index&apos;
  }
};

// Submit a job.
task.submit(NDVIParameters);</code>
</code></pre>
<p>For a complete list of available events, please see the <a href="./manual/../class/src/Server.js~Server.html"><strong>Server</strong></a> class documentation.</p>
<h2 id="tracking-job-progress">Tracking Job Progress</h2>
<p>There are two ways to track the progress of a single job.</p>
<h3 id="progress-callbacks">Progress Callbacks</h3>
<p>The <a href="./manual/../class/src/Task.js~Task.html#instance-method-submit"><strong>.submit()</strong></a> and <a href="./manual/../class/src/Task.js~Task.html#instance-method-submitAndWait"><strong>.submitAndWait()</strong></a> functions support the inclusion of a progress callback for reporting job progress.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const progressCallback = function (data) {
  console.log(&apos;Job progress percent: &apos;, data.progress);
  console.log(&apos;Job progress message: &apos;, data.message);
};

// Submit a job.
task.submitAndWait(parameters, progressCallback).then((results) =&gt; {
    // Do something with results.
    // This function is an example and is not provided by the SDK.
    AddToMap(results.OUTPUT_RASTER);
  }).catch((jobErrorMessage) =&gt; {
    // Display error.
  });</code>
</code></pre>
<h3 id="progress-events">Progress Events</h3>
<p>Job progress events are emitted by the <a href="./manual/../class/src/Server.js~Server.html"><strong>Server</strong></a> and <a href="./manual/../class/src/Job.js~Job.html"><strong>Job</strong></a> objects.</p>
<h4 id="server-progress-events">Server Progress Events</h4>
<p>It is possible to listen to all job progress events using the <a href="./manual/../class/src/Server.js~Server.html"><strong>Server</strong></a> object.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// GSF Server
const server = GSF.server({
    address: &apos;MyServer&apos;,
    port: &apos;9191&apos;
  });

// Set up an event listeners.
server.on(&apos;JobProgress&apos;, (data) =&gt; {
  console.log(&apos;Job &apos;, data.jobId, &apos; progress percent: &apos;, data.progress);
  console.log(&apos;Job &apos;, data.jobId, &apos; progress message: &apos;, data.message);
});  

// Create a service object.
const service = server.service(&apos;ENVI&apos;);

// Create a task object.
const task = service.task(&apos;SpectralIndex&apos;);

const NDVIParameters = {
  parameters: {
    INPUT_RASTER: {
      FACTORY: &apos;URLRaster&apos;,
      URL: &apos;http://MyServer:9191/ese/data/qb_boulder_msi&apos;
    },
    INDEX: &apos;Normalized Difference Vegetation Index&apos;
  }
};

// Submit a job.
task.submit(NDVIParameters);</code>
</code></pre>
<h4 id="job-progress-events">Job Progress Events</h4>
<p>A <a href="./manual/../class/src/Job.js~Job.html"><strong>Job</strong></a> object emits progress events for the particular job which it represents.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// GSF Server
const server = GSF.server({
    address: &apos;MyServer&apos;,
    port: &apos;9191&apos;
  });

// Create a service object.
const service = server.service(&apos;ENVI&apos;);

// Create a task object.
const task = service.task(&apos;SpectralIndex&apos;);

const NDVIParameters = {
  parameters: {
    INPUT_RASTER: {
      FACTORY: &apos;URLRaster&apos;,
      URL: &apos;http://MyServer:9191/ese/data/qb_boulder_msi&apos;
    },
    INDEX: &apos;Normalized Difference Vegetation Index&apos;
  }
};

// Submit a job.
task.submit(NDVIParameters).then((job) =&gt; {
  // Set up an event listeners.
  job.on(&apos;Progress&apos;, (data) =&gt; {
    console.log(&apos;Job &apos;, data.jobId, &apos; progress percent: &apos;, data.progress);
    console.log(&apos;Job &apos;, data.jobId, &apos; progress message: &apos;, data.message);
  });  
}).catch((jobErrorMessage) =&gt; {
  // Display error.
});</code>
</code></pre>
<h2 id="cancelling-jobs">Cancelling Jobs</h2>
<p>Below is an example of cancelling a job based on its job ID.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const myJobId = 1;
const job = new server.job(myJobId);
const force = false; // Do not force cancel.

// Cancel Job
job.cancel(force).then(() =&gt; {
  console.log(&apos;Cancel has been successfully requested.&apos;);
}).catch((err) =&gt; {
  // Display error.
});</code>
</code></pre>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
